<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>An√°lise de Im√≥veis</title>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üè†</text></svg>">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
    <style>
        /* ====== RESET & BASE ====== */
        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        :root {
            --bg-primary: #0a0a1a;
            --bg-secondary: #111128;
            --bg-card: rgba(255, 255, 255, 0.04);
            --bg-card-hover: rgba(255, 255, 255, 0.07);
            --glass-border: rgba(255, 255, 255, 0.08);
            --glass-border-hover: rgba(255, 255, 255, 0.15);
            --text-primary: #f0f0f5;
            --text-secondary: #a0a0b8;
            --text-muted: #6a6a82;
            --accent: #7c5cfc;
            --accent-glow: rgba(124, 92, 252, 0.25);
            --accent-soft: rgba(124, 92, 252, 0.12);
            --green: #34d399;
            --green-soft: rgba(52, 211, 153, 0.12);
            --gold: #f5c542;
            --gold-soft: rgba(245, 197, 66, 0.12);
            --red: #f87171;
            --red-soft: rgba(248, 113, 113, 0.12);
            --blue: #60a5fa;
            --radius: 16px;
            --radius-sm: 10px;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            -webkit-font-smoothing: antialiased;
        }

        /* ====== BACKGROUND EFFECT ====== */
        body::before {
            content: '';
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(ellipse at 20% 50%, rgba(124, 92, 252, 0.06) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 20%, rgba(52, 211, 153, 0.04) 0%, transparent 50%),
                radial-gradient(ellipse at 50% 80%, rgba(245, 197, 66, 0.03) 0%, transparent 50%);
            z-index: 0;
            pointer-events: none;
        }

        /* ====== HEADER ====== */
        .header {
            position: relative;
            z-index: 1;
            padding: 48px 24px 32px;
            text-align: center;
            border-bottom: 1px solid var(--glass-border);
            background: linear-gradient(180deg, rgba(124, 92, 252, 0.06) 0%, transparent 100%);
        }

        .header__icon {
            font-size: 48px;
            margin-bottom: 12px;
            display: block;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-6px);
            }
        }

        .header h1 {
            font-size: clamp(1.8rem, 4vw, 2.8rem);
            font-weight: 800;
            letter-spacing: -0.03em;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            color: var(--text-secondary);
            font-size: 1rem;
            margin-top: 6px;
            font-weight: 300;
        }

        /* ====== FILTERS ====== */
        .filters {
            position: relative;
            z-index: 1;
            display: flex;
            justify-content: center;
            gap: 10px;
            padding: 20px 24px;
            flex-wrap: wrap;
        }

        .filter-btn {
            border: 1px solid var(--glass-border);
            background: var(--bg-card);
            color: var(--text-secondary);
            padding: 8px 20px;
            border-radius: 100px;
            font-family: inherit;
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            backdrop-filter: blur(12px);
        }

        .filter-btn:hover {
            border-color: var(--glass-border-hover);
            color: var(--text-primary);
            background: var(--bg-card-hover);
        }

        .filter-btn.active {
            background: var(--accent-soft);
            border-color: var(--accent);
            color: var(--accent);
            box-shadow: 0 0 20px var(--accent-glow);
        }

        .btn-add-house {
            border: 1px dashed var(--accent);
            background: var(--accent-soft);
            color: var(--accent);
            padding: 8px 20px;
            border-radius: 100px;
            font-family: inherit;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .btn-add-house:hover {
            background: rgba(124, 92, 252, 0.25);
            box-shadow: 0 0 20px var(--accent-glow);
            transform: translateY(-1px);
        }

        /* ====== STATS BAR ====== */
        .stats {
            position: relative;
            z-index: 1;
            display: flex;
            justify-content: center;
            gap: 32px;
            padding: 0 24px 24px;
            flex-wrap: wrap;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .stat-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .stat-dot--available {
            background: var(--green);
            box-shadow: 0 0 8px rgba(52, 211, 153, 0.4);
        }

        .stat-dot--discarded {
            background: var(--red);
            box-shadow: 0 0 8px rgba(248, 113, 113, 0.4);
        }

        /* ====== GRID ====== */
        .grid {
            position: relative;
            z-index: 1;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(360px, 1fr));
            gap: 24px;
            padding: 0 24px 48px;
            max-width: 1280px;
            margin: 0 auto;
        }

        /* ====== CARD ====== */
        .card {
            background: var(--bg-card);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius);
            overflow: hidden;
            backdrop-filter: blur(16px);
            transition: var(--transition);
            animation: fadeInUp 0.5s ease both;
        }

        .card:nth-child(1) {
            animation-delay: 0.05s;
        }

        .card:nth-child(2) {
            animation-delay: 0.15s;
        }

        .card:nth-child(3) {
            animation-delay: 0.25s;
        }

        .card:nth-child(4) {
            animation-delay: 0.35s;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(24px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card:hover {
            border-color: var(--glass-border-hover);
            background: var(--bg-card-hover);
            transform: translateY(-4px);
            box-shadow: var(--shadow), 0 0 40px var(--accent-glow);
        }

        .card.discarded {
            opacity: 0.5;
            filter: grayscale(0.4);
        }

        .card.discarded:hover {
            opacity: 0.75;
            filter: grayscale(0.2);
        }

        /* ---- Image Section ---- */
        .card__image-wrapper {
            position: relative;
            width: 100%;
            aspect-ratio: 16 / 10;
            overflow: hidden;
            cursor: pointer;
        }

        .card__image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .card:hover .card__image {
            transform: scale(1.05);
        }

        .card__image-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(180deg, transparent 40%, rgba(0, 0, 0, 0.7) 100%);
            pointer-events: none;
        }

        .card__price {
            position: absolute;
            top: 14px;
            right: 14px;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(245, 197, 66, 0.25);
            padding: 6px 14px;
            border-radius: 100px;
            font-weight: 700;
            font-size: 1.05rem;
            color: var(--gold);
        }

        .card__status-badge {
            position: absolute;
            top: 14px;
            left: 14px;
            padding: 5px 12px;
            border-radius: 100px;
            font-size: 0.72rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.06em;
        }

        .card__status-badge--available {
            background: #059669;
            border: 1px solid #34d399;
            color: #fff;
        }

        .card__status-badge--discarded {
            background: #dc2626;
            border: 1px solid #f87171;
            color: #fff;
        }

        .card__photo-count {
            position: absolute;
            bottom: 12px;
            right: 14px;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(8px);
            padding: 4px 10px;
            border-radius: 100px;
            font-size: 0.75rem;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 4px;
        }

        /* ---- Body Section ---- */
        .card__body {
            padding: 20px;
        }

        .card__name {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 4px;
            color: var(--text-primary);
        }

        .card__location {
            display: flex;
            align-items: flex-start;
            gap: 6px;
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 16px;
            line-height: 1.4;
        }

        .card__location svg {
            flex-shrink: 0;
            margin-top: 2px;
        }

        /* ---- Features ---- */
        .card__features {
            display: flex;
            gap: 10px;
            margin-bottom: 18px;
            flex-wrap: wrap;
        }

        .feature {
            display: flex;
            align-items: center;
            gap: 6px;
            background: var(--bg-card);
            border: 1px solid var(--glass-border);
            padding: 6px 12px;
            border-radius: var(--radius-sm);
            font-size: 0.8rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .feature svg {
            width: 16px;
            height: 16px;
            opacity: 0.7;
        }

        /* ---- Info Rows (agendamento, mobilia) ---- */
        .card__info-rows {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 16px;
        }

        .card__info-row {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.82rem;
            color: var(--text-secondary);
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.02);
            border-radius: var(--radius-sm);
            border: 1px solid var(--glass-border);
        }

        .card__info-row svg {
            width: 16px;
            height: 16px;
            flex-shrink: 0;
            opacity: 0.7;
        }

        .info-badge {
            margin-left: auto;
            padding: 2px 10px;
            border-radius: 100px;
            font-size: 0.72rem;
            font-weight: 600;
        }

        .info-badge--scheduled {
            background: rgba(124, 92, 252, 0.12);
            border: 1px solid rgba(124, 92, 252, 0.25);
            color: var(--accent);
        }

        .info-badge--not-scheduled {
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid var(--glass-border);
            color: var(--text-muted);
        }

        .info-badge--sem {
            background: rgba(248, 113, 113, 0.1);
            border: 1px solid rgba(248, 113, 113, 0.2);
            color: var(--red);
        }

        .info-badge--semi {
            background: rgba(245, 197, 66, 0.1);
            border: 1px solid rgba(245, 197, 66, 0.2);
            color: var(--gold);
        }

        .info-badge--mobiliado {
            background: rgba(52, 211, 153, 0.1);
            border: 1px solid rgba(52, 211, 153, 0.2);
            color: var(--green);
        }

        /* ---- Contact ---- */
        .card__contact {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.82rem;
            color: var(--text-muted);
            margin-bottom: 18px;
            padding: 10px 12px;
            background: rgba(255, 255, 255, 0.02);
            border-radius: var(--radius-sm);
            border: 1px solid var(--glass-border);
        }

        .card__contact strong {
            color: var(--text-secondary);
            font-weight: 600;
        }

        /* ---- Actions ---- */
        .card__actions {
            display: flex;
            gap: 8px;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            padding: 10px 16px;
            border-radius: var(--radius-sm);
            font-family: inherit;
            font-size: 0.82rem;
            font-weight: 600;
            text-decoration: none;
            border: none;
            cursor: pointer;
            transition: var(--transition);
            flex: 1;
        }

        .btn svg {
            width: 16px;
            height: 16px;
        }

        .btn--gallery {
            background: var(--accent-soft);
            border: 1px solid rgba(124, 92, 252, 0.25);
            color: var(--accent);
        }

        .btn--gallery:hover {
            background: rgba(124, 92, 252, 0.2);
            box-shadow: 0 0 20px var(--accent-glow);
            transform: translateY(-1px);
        }

        .btn--whatsapp {
            background: var(--green-soft);
            border: 1px solid rgba(52, 211, 153, 0.25);
            color: var(--green);
        }

        .btn--whatsapp:hover {
            background: rgba(52, 211, 153, 0.2);
            box-shadow: 0 0 20px rgba(52, 211, 153, 0.2);
            transform: translateY(-1px);
        }

        .btn--facebook {
            background: rgba(96, 165, 250, 0.1);
            border: 1px solid rgba(96, 165, 250, 0.25);
            color: var(--blue);
        }

        .btn--facebook:hover {
            background: rgba(96, 165, 250, 0.18);
            box-shadow: 0 0 20px rgba(96, 165, 250, 0.2);
            transform: translateY(-1px);
        }

        /* ====== MODAL / LIGHTBOX ====== */
        .modal-overlay {
            position: fixed;
            inset: 0;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.92);
            backdrop-filter: blur(8px);
            display: none;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal-overlay.open {
            display: flex;
            opacity: 1;
        }

        .modal {
            position: relative;
            max-width: 90vw;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .modal__title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 12px;
            text-align: center;
        }

        .modal__image-container {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
        }

        .modal__image {
            max-width: 80vw;
            max-height: 72vh;
            border-radius: var(--radius);
            object-fit: contain;
            box-shadow: 0 12px 48px rgba(0, 0, 0, 0.5);
            transition: opacity 0.3s ease;
        }

        .modal__close {
            position: fixed;
            top: 20px;
            right: 24px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.15);
            color: #fff;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 1.3rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            z-index: 1001;
        }

        .modal__close:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        .modal__nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.15);
            color: #fff;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            z-index: 1001;
        }

        .modal__nav:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-50%) scale(1.1);
        }

        .modal__nav--prev {
            left: -60px;
        }

        .modal__nav--next {
            right: -60px;
        }

        .modal__counter {
            margin-top: 14px;
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        /* ====== THUMBNAILS ====== */
        .modal__thumbs {
            display: flex;
            gap: 8px;
            margin-top: 14px;
            overflow-x: auto;
            max-width: 80vw;
            padding: 4px 0;
            scrollbar-width: thin;
            scrollbar-color: var(--glass-border) transparent;
        }

        .modal__thumb {
            width: 60px;
            height: 42px;
            border-radius: 6px;
            object-fit: cover;
            cursor: pointer;
            border: 2px solid transparent;
            opacity: 0.5;
            transition: var(--transition);
            flex-shrink: 0;
        }

        .modal__thumb:hover {
            opacity: 0.8;
        }

        .modal__thumb.active {
            border-color: var(--accent);
            opacity: 1;
            box-shadow: 0 0 12px var(--accent-glow);
        }

        /* ====== FOOTER ====== */
        .footer {
            position: relative;
            z-index: 1;
            text-align: center;
            padding: 24px;
            border-top: 1px solid var(--glass-border);
            color: var(--text-muted);
            font-size: 0.8rem;
        }

        /* ====== RESPONSIVE ====== */
        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
                padding: 0 16px 32px;
                gap: 20px;
            }

            .header {
                padding: 32px 16px 24px;
            }

            .card__actions {
                flex-direction: column;
            }

            .modal__nav--prev {
                left: 8px;
            }

            .modal__nav--next {
                right: 8px;
            }

            .modal__image {
                max-width: 92vw;
                max-height: 60vh;
            }
        }

        @media (max-width: 420px) {
            .grid {
                grid-template-columns: 1fr;
            }

            .card__features {
                gap: 6px;
            }

            .feature {
                padding: 5px 8px;
                font-size: 0.75rem;
            }
        }

        /* ====== EMPTY STATE ====== */
        .empty-state {
            grid-column: 1 / -1;
            text-align: center;
            padding: 64px 24px;
            color: var(--text-muted);
        }

        .empty-state__icon {
            font-size: 48px;
            margin-bottom: 12px;
        }

        /* ====== FORM MODAL ====== */
        .form-overlay {
            position: fixed;
            inset: 0;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.88);
            backdrop-filter: blur(8px);
            display: none;
            align-items: flex-start;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
            overflow-y: auto;
            padding: 40px 16px;
        }

        .form-overlay.open {
            display: flex;
            opacity: 1;
        }

        .form-modal {
            background: var(--bg-secondary);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius);
            width: 100%;
            max-width: 540px;
            padding: 32px;
            position: relative;
        }

        .form-modal__header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 28px;
        }

        .form-modal__title {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-modal__close {
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid var(--glass-border);
            color: var(--text-secondary);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            font-size: 1.1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .form-modal__close:hover {
            background: rgba(255, 255, 255, 0.12);
            color: var(--text-primary);
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-group label {
            display: block;
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 6px;
            text-transform: uppercase;
            letter-spacing: 0.04em;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 10px 14px;
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-sm);
            color: var(--text-primary);
            font-family: inherit;
            font-size: 0.9rem;
            transition: var(--transition);
            outline: none;
        }

        .form-group input:focus,
        .form-group select:focus {
            border-color: var(--accent);
            box-shadow: 0 0 12px var(--accent-glow);
        }

        .form-group input::placeholder {
            color: var(--text-muted);
        }

        .form-group select option {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .form-row-3 {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 12px;
        }

        .form-divider {
            border: none;
            border-top: 1px solid var(--glass-border);
            margin: 20px 0;
        }

        .form-submit {
            width: 100%;
            padding: 14px;
            background: var(--accent);
            border: none;
            border-radius: var(--radius-sm);
            color: #fff;
            font-family: inherit;
            font-size: 0.95rem;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 8px;
        }

        .form-submit:hover {
            background: #6a4ce0;
            box-shadow: 0 0 24px var(--accent-glow);
            transform: translateY(-1px);
        }

        .form-hint {
            font-size: 0.72rem;
            color: var(--text-muted);
            margin-top: 4px;
        }

        @media (max-width: 420px) {

            .form-row,
            .form-row-3 {
                grid-template-columns: 1fr;
            }

            .form-modal {
                padding: 20px;
            }
        }
    </style>
</head>

<body>

    <!-- HEADER -->
    <header class="header">
        <span class="header__icon">üè†</span>
        <h1>An√°lise de Im√≥veis</h1>
        <p>Im√≥veis em avalia√ß√£o ‚Äî John e Maria</p>
    </header>

    <!-- FILTERS -->
    <nav class="filters" id="filters">
        <button class="filter-btn active" data-filter="all">üèòÔ∏è Todas</button>
        <button class="filter-btn" data-filter="available">‚úÖ Dispon√≠veis</button>
        <button class="filter-btn" data-filter="discarded">‚ùå Descartadas</button>
        <button class="btn-add-house" id="btnAddHouse" title="Cadastrar novo im√≥vel">Ôºã Novo Im√≥vel</button>
    </nav>

    <!-- STATS -->
    <div class="stats" id="stats"></div>

    <!-- GRID -->
    <main class="grid" id="grid"></main>

    <!-- GALLERY MODAL -->
    <div class="modal-overlay" id="modalOverlay">
        <button class="modal__close" id="modalClose" title="Fechar">‚úï</button>
        <div class="modal">
            <div class="modal__title" id="modalTitle"></div>
            <div class="modal__image-container">
                <button class="modal__nav modal__nav--prev" id="modalPrev" title="Anterior">‚Äπ</button>
                <img class="modal__image" id="modalImage" alt="Foto da casa" />
                <button class="modal__nav modal__nav--next" id="modalNext" title="Pr√≥ximo">‚Ä∫</button>
            </div>
            <div class="modal__counter" id="modalCounter"></div>
            <div class="modal__thumbs" id="modalThumbs"></div>
        </div>
    </div>

    <!-- FORM MODAL -->
    <div class="form-overlay" id="formOverlay">
        <div class="form-modal">
            <div class="form-modal__header">
                <div class="form-modal__title">üè† Cadastrar Novo Im√≥vel</div>
                <button class="form-modal__close" id="formClose" title="Fechar">‚úï</button>
            </div>
            <form id="houseForm">
                <div class="form-group">
                    <label>Nome do Im√≥vel *</label>
                    <input type="text" id="fNome" placeholder="Ex: Rua das Flores ‚Äî Centro" required>
                </div>
                <div class="form-group">
                    <label>Localiza√ß√£o *</label>
                    <input type="text" id="fLocalizacao" placeholder="Endere√ßo completo" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Contato (nome) *</label>
                        <input type="text" id="fContato" placeholder="Nome do contato" required>
                    </div>
                    <div class="form-group">
                        <label>Telefone *</label>
                        <input type="text" id="fTelefone" placeholder="73 99999-0000" required>
                    </div>
                </div>
                <div class="form-row-3">
                    <div class="form-group">
                        <label>Pre√ßo (R$) *</label>
                        <input type="number" id="fPreco" placeholder="1500" required>
                    </div>
                    <div class="form-group">
                        <label>Quartos *</label>
                        <input type="number" id="fQuartos" placeholder="2" min="0" required>
                    </div>
                    <div class="form-group">
                        <label>Banheiros *</label>
                        <input type="number" id="fBanheiros" placeholder="1" min="0" required>
                    </div>
                </div>
                <div class="form-row-3">
                    <div class="form-group">
                        <label>Garagem</label>
                        <select id="fGaragem">
                            <option value="false">N√£o</option>
                            <option value="true">Sim</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Mob√≠lia</label>
                        <select id="fMobilia">
                            <option value="sem">Sem mob√≠lia</option>
                            <option value="semi">Semi-mobiliado</option>
                            <option value="mobiliado">Mobiliado</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Status</label>
                        <select id="fStatus">
                            <option value="available">Dispon√≠vel</option>
                            <option value="discarded">Descartada</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Visita agendada</label>
                    <input type="text" id="fAgendamento" placeholder="Ex: 22/02 √†s 14h (deixe vazio se n√£o agendou)">
                </div>
                <hr class="form-divider">
                <div class="form-group">
                    <label>Link do an√∫ncio (Facebook)</label>
                    <input type="url" id="fFacebook" placeholder="https://facebook.com/marketplace/...">
                </div>
                <div class="form-group">
                    <label>Adicionado por *</label>
                    <input type="text" id="fAdicionadoPor" placeholder="Seu nome" required>
                </div>
                <button type="submit" class="form-submit">‚úÖ Cadastrar Im√≥vel</button>
            </form>
        </div>
    </div>

    <!-- FOOTER -->
    <footer class="footer">
        <p>An√°lise de Im√≥veis ¬∑ Atualizado em Fev 2026</p>
    </footer>

    <script>
        // ====== FIREBASE INIT ======
        const firebaseConfig = {
            apiKey: "AIzaSyAAGhCHRumL5zj9HCfaJQmlq9JnznqvjGM",
            authDomain: "busca-de-casas-para-alugar.firebaseapp.com",
            projectId: "busca-de-casas-para-alugar",
            storageBucket: "busca-de-casas-para-alugar.firebasestorage.app",
            messagingSenderId: "445659706302",
            appId: "1:445659706302:web:ccaa2c8f35e995c2e97fef"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // ====== DATA ======
        const casas = [
            {
                id: 1,
                nome: "Rua Allan Kardec ‚Äî Jardim Italamar",
                contato: "Marcia",
                telefone: "73 99810-1161",
                preco: 1500,
                localizacao: "Rua Allan Kardec 157, Loteamento Jardim Italamar",
                quartos: 2,
                banheiros: 2,
                garagem: true,
                agendamento: "18 / 02 / 2025 - A partir das 17h",
                mobilia: "sem",
                status: "available",
                facebookUrl: "https://www.facebook.com/marketplace/item/1965257111057856/",
                fotos: [
                    "Jardim Italamar - Marcia - 1500/foto (1).jpg",
                    "Jardim Italamar - Marcia - 1500/Foto (0).jpg",
                    "Jardim Italamar - Marcia - 1500/foto (2).jpg",
                    "Jardim Italamar - Marcia - 1500/foto (3).jpg",
                    "Jardim Italamar - Marcia - 1500/foto (4).jpg",
                    "Jardim Italamar - Marcia - 1500/foto (5).jpg",
                    "Jardim Italamar - Marcia - 1500/foto (6).jpg",
                    "Jardim Italamar - Marcia - 1500/foto (7).jpg"
                ]
            },
            {
                id: 2,
                nome: "Rua Aurora ‚Äî Goes Calmon",
                contato: "Sara",
                telefone: "(11) 97314-8901",
                preco: 1500,
                localizacao: "Rua Aurora - Goes Calmon",
                quartos: 2,
                banheiros: 2,
                garagem: true,
                agendamento: "Desmarcado - Casa descartada",
                mobilia: "sem",
                status: "discarded",
                facebookUrl: "https://www.facebook.com/marketplace/item/941324115060194/",
                fotos: [
                    "Rua Aurora - Goes Calmon/638275929_25814880101454060_5366175479839824541_n.jpg"
                ]
            },
            {
                id: 3,
                nome: "Rua Aroeira ‚Äî Santo Ant√¥nio",
                contato: "Vernon Falc√£o",
                telefone: "73 9151-6848",
                preco: 1500,
                localizacao: "Rua Aroeira - 165, Santo Ant√¥nio, Pr√≥x. Cond. Colina Park",
                quartos: 3,
                banheiros: 2,
                garagem: false,
                agendamento: null,
                mobilia: "semi",
                status: "available",
                facebookUrl: "https://www.facebook.com/marketplace/item/2056715964911449/",
                fotos: [
                    "Rua Aroeira/633665890_4034422743368817_1160689639168187461_n.jpg",
                    "Rua Aroeira/632941580_921076150280079_4963112764048071574_n.jpg",
                    "Rua Aroeira/633599220_2845796109145733_1432009332912083024_n.jpg",
                    "Rua Aroeira/633613926_1957122665221713_2932704534989087319_n.jpg",
                    "Rua Aroeira/633634295_888394024171617_4620845722797266914_n.jpg",
                    "Rua Aroeira/633639281_925011296873660_6513286452024018843_n.jpg",
                    "Rua Aroeira/633656870_3271878109689691_6174014498371422743_n.jpg",
                    "Rua Aroeira/633661634_1226013339114047_865620832502376546_n.jpg",
                    "Rua Aroeira/633725609_773787919046441_2192058593017625476_n.jpg",
                    "Rua Aroeira/633731954_1614715749550822_1896977895837275062_n.jpg",
                    "Rua Aroeira/634933206_942603781453227_6199336669923926537_n.jpg",
                    "Rua Aroeira/635032474_2809477222752135_3228520437017592550_n.jpg",
                    "Rua Aroeira/635048459_1233777442219727_7010276035451055682_n.jpg",
                    "Rua Aroeira/635479269_1328999805728549_3138188772532643115_n.jpg",
                    "Rua Aroeira/635648146_1413640983786490_2629931283253745161_n.jpg",
                    "Rua Aroeira/635958117_1446776433768823_1762537913971019501_n.jpg",
                    "Rua Aroeira/636627467_1225253983131233_6219124093769825264_n.jpg",
                    "Rua Aroeira/637736077_1475215317267789_4753170204758050757_n.jpg",
                    "Rua Aroeira/638207855_1472595497732792_3726410390029711352_n.jpg",
                    "Rua Aroeira/638274182_2639665769743158_458564752166512963_n.jpg",
                    "Rua Aroeira/638292075_1254155689555851_5148854413358177546_n.jpg"
                ]
            },
            {
                id: 4,
                nome: "Cond. Eco Am√©rica",
                contato: "Jeanlucas Silva",
                telefone: "(93) 99131-5678",
                preco: 1400,
                localizacao: "Condom√≠nio Eco Am√©rica",
                quartos: 2,
                banheiros: 1,
                garagem: false,
                agendamento: null,
                mobilia: "sem",
                status: "discarded",
                facebookUrl: "#",
                fotos: [
                    "Condominio Eco America - 1400/534953944_1495013408181744_7442548002452847132_n.jpg",
                    "Condominio Eco America - 1400/534894516_2159128607926844_6929777708402955147_n.jpg",
                    "Condominio Eco America - 1400/534942225_1298606131816702_3856594512370582699_n.jpg",
                    "Condominio Eco America - 1400/535019045_1524277141895273_1133493394192005957_n.jpg",
                    "Condominio Eco America - 1400/535376710_1103714881267005_7036994203290793011_n.jpg",
                    "Condominio Eco America - 1400/535432481_631263429703895_3920561479129621866_n.jpg",
                    "Condominio Eco America - 1400/535438719_1642020896723269_1627533674656593854_n.jpg",
                    "Condominio Eco America - 1400/541234426_782214624758448_6623135294006786075_n.jpg",
                    "Condominio Eco America - 1400/571193804_1512231596639655_5800142737764555730_n.jpg"
                ]
            }
        ];

        // ====== SVG ICONS ======
        const icons = {
            pin: `<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>`,
            bed: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 4v16"/><path d="M2 8h18a2 2 0 0 1 2 2v10"/><path d="M2 17h20"/><path d="M6 8v9"/></svg>`,
            bath: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 12h16a1 1 0 0 1 1 1v3a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4v-3a1 1 0 0 1 1-1z"/><path d="M6 12V5a2 2 0 0 1 2-2h3v2.25"/><path d="M4 21l1-1.5"/><path d="M20 21l-1-1.5"/></svg>`,
            car: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2"/><circle cx="7" cy="17" r="2"/><path d="M9 17h6"/><circle cx="17" cy="17" r="2"/></svg>`,
            camera: `<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"/><circle cx="12" cy="13" r="3"/></svg>`,
            phone: `<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72c.127.96.361 1.903.7 2.81a2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0 1 22 16.92z"/></svg>`,
            whatsapp: `<svg viewBox="0 0 24 24" fill="currentColor"><path d="M17.472 14.382c-.297-.15-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347z"/><path d="M12 0C5.373 0 0 5.373 0 12c0 2.11.546 4.093 1.503 5.818L0 24l6.335-1.462A11.935 11.935 0 0 0 12 24c6.627 0 12-5.373 12-12S18.627 0 12 0zm0 21.82a9.795 9.795 0 0 1-5.09-1.42l-.365-.217-3.782.992 1.01-3.685-.237-.377A9.796 9.796 0 0 1 2.18 12C2.18 6.584 6.584 2.18 12 2.18S21.82 6.584 21.82 12 17.416 21.82 12 21.82z"/></svg>`,
            facebook: `<svg viewBox="0 0 24 24" fill="currentColor"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>`,
            images: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="9" cy="9" r="2"/><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/></svg>`,
            calendar: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>`,
            sofa: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 9V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3"/><path d="M2 11v5a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v2H6v-2a2 2 0 0 0-4 0z"/><path d="M4 18v2"/><path d="M20 18v2"/></svg>`
        };

        // ====== FORMAT PRICE ======
        function formatPrice(val) {
            return 'R$ ' + val.toLocaleString('pt-BR', { minimumFractionDigits: 2 });
        }

        // ====== WHATSAPP LINK ======
        function whatsappLink(phone, nome) {
            const clean = phone.replace(/\D/g, '');
            const num = clean.length <= 11 ? '55' + clean : clean;
            const msg = encodeURIComponent(`Ol√°! Vi o an√∫ncio da ${nome} e gostaria de mais informa√ß√µes sobre o aluguel.`);
            return `https://wa.me/${num}?text=${msg}`;
        }

        // ====== RENDER CARD ======
        function renderCard(casa) {
            const coverSrc = casa.fotos.length > 0 ? casa.fotos[0] : '';
            const statusLabel = casa.status === 'available' ? 'Dispon√≠vel' : 'Descartada';
            const statusClass = casa.status === 'available' ? 'available' : 'discarded';

            return `
                <article class="card ${casa.status === 'discarded' ? 'discarded' : ''}" data-status="${casa.status}" data-id="${casa.id}">
                    <div class="card__image-wrapper" onclick="openGallery(${casa.id})" title="Ver fotos">
                        ${coverSrc
                    ? `<img class="card__image" src="${encodeURI(coverSrc)}" alt="${casa.nome}" loading="lazy" />`
                    : `<div style="width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:var(--bg-secondary);"><span style="font-size:48px;opacity:0.3;">üè†</span></div>`
                }
                        <div class="card__image-overlay"></div>
                        <span class="card__price">${formatPrice(casa.preco)}/m√™s</span>
                        <span class="card__status-badge card__status-badge--${statusClass}">${statusLabel}</span>
                        ${casa.fotos.length > 0 ? `<span class="card__photo-count">${icons.camera} ${casa.fotos.length} foto${casa.fotos.length > 1 ? 's' : ''}</span>` : ''}
                    </div>
                    <div class="card__body">
                        <h2 class="card__name">${casa.nome}</h2>
                        <div class="card__location">
                            ${icons.pin}
                            <span>${casa.localizacao}</span>
                        </div>
                        <div class="card__features">
                            <span class="feature">${icons.bed} ${casa.quartos} quarto${casa.quartos > 1 ? 's' : ''}</span>
                            <span class="feature">${icons.bath} ${casa.banheiros} banheiro${casa.banheiros > 1 ? 's' : ''}</span>
                            ${casa.garagem ? `<span class="feature">${icons.car} Garagem</span>` : ''}
                        </div>
                        <div class="card__info-rows">
                            <div class="card__info-row">
                                ${icons.calendar}
                                <span>Visita agendada</span>
                                ${casa.agendamento
                    ? `<span class="info-badge info-badge--scheduled">üìÖ ${casa.agendamento}</span>`
                    : `<span class="info-badge info-badge--not-scheduled">N√£o agendado</span>`
                }
                            </div>
                            <div class="card__info-row">
                                ${icons.sofa}
                                <span>Mob√≠lia</span>
                                <span class="info-badge info-badge--${casa.mobilia === 'mobiliado' ? 'mobiliado' : casa.mobilia === 'semi' ? 'semi' : 'sem'}">
                                    ${casa.mobilia === 'mobiliado' ? 'Mobiliado' : casa.mobilia === 'semi' ? 'Semi-mobiliado' : 'Sem mob√≠lia'}
                                </span>
                            </div>
                        </div>
                        <div class="card__contact">
                            ${icons.phone}
                            <span><strong>${casa.contato}</strong> ¬∑ ${casa.telefone}</span>
                        </div>
                        ${casa.adicionadoPor ? `<div class="card__contact" style="margin-bottom:12px;font-size:0.78rem;"><span>üìù</span><span>Adicionado por <strong>${casa.adicionadoPor}</strong></span></div>` : ''}
                        <div class="card__actions">
                            ${casa.fotos.length > 0 ? `<button class="btn btn--gallery" onclick="openGallery(${casa.id})">${icons.images} Ver Fotos</button>` : ''}
                            <a class="btn btn--whatsapp" href="${whatsappLink(casa.telefone, casa.nome)}" target="_blank" rel="noopener">${icons.whatsapp} WhatsApp</a>
                            ${casa.facebookUrl !== '#' ? `<a class="btn btn--facebook" href="${casa.facebookUrl}" target="_blank" rel="noopener">${icons.facebook} An√∫ncio</a>` : ''}
                        </div>
                    </div>
                </article>
            `;
        }

        // ====== RENDER ALL ======
        let currentFilter = 'all';

        function render() {
            const grid = document.getElementById('grid');
            const filtered = casas.filter(c => {
                if (currentFilter === 'all') return true;
                return c.status === currentFilter;
            }).sort((a, b) => {
                if (a.status === 'available' && b.status === 'discarded') return -1;
                if (a.status === 'discarded' && b.status === 'available') return 1;
                return 0;
            });

            if (filtered.length === 0) {
                grid.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state__icon">üîç</div>
                        <p>Nenhuma casa encontrada com este filtro.</p>
                    </div>
                `;
            } else {
                grid.innerHTML = filtered.map(renderCard).join('');
            }

            // Stats
            const available = casas.filter(c => c.status === 'available').length;
            const discarded = casas.filter(c => c.status === 'discarded').length;
            document.getElementById('stats').innerHTML = `
                <div class="stat-item"><span class="stat-dot stat-dot--available"></span>${available} dispon√≠ve${available > 1 ? 'is' : 'l'}</div>
                <div class="stat-item"><span class="stat-dot stat-dot--discarded"></span>${discarded} descartada${discarded > 1 ? 's' : ''}</div>
            `;
        }

        // ====== FILTERS ======
        document.getElementById('filters').addEventListener('click', (e) => {
            const btn = e.target.closest('.filter-btn');
            if (!btn) return;
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            currentFilter = btn.dataset.filter;
            render();
        });

        // ====== GALLERY / LIGHTBOX ======
        let galleryPhotos = [];
        let galleryIndex = 0;

        function openGallery(casaId) {
            const casa = casas.find(c => c.id === casaId);
            if (!casa || casa.fotos.length === 0) return;
            galleryPhotos = casa.fotos;
            galleryIndex = 0;
            document.getElementById('modalTitle').textContent = casa.nome;
            updateGalleryImage();
            renderThumbnails();
            const overlay = document.getElementById('modalOverlay');
            overlay.classList.add('open');
            document.body.style.overflow = 'hidden';
        }

        function closeGallery() {
            document.getElementById('modalOverlay').classList.remove('open');
            document.body.style.overflow = '';
        }

        function updateGalleryImage() {
            const img = document.getElementById('modalImage');
            img.style.opacity = '0';
            setTimeout(() => {
                img.src = encodeURI(galleryPhotos[galleryIndex]);
                img.onload = () => { img.style.opacity = '1'; };
            }, 150);
            document.getElementById('modalCounter').textContent = `${galleryIndex + 1} / ${galleryPhotos.length}`;
            // Update active thumb
            document.querySelectorAll('.modal__thumb').forEach((t, i) => {
                t.classList.toggle('active', i === galleryIndex);
            });
        }

        function renderThumbnails() {
            const container = document.getElementById('modalThumbs');
            container.innerHTML = galleryPhotos.map((src, i) =>
                `<img class="modal__thumb ${i === 0 ? 'active' : ''}" src="${encodeURI(src)}" alt="Miniatura ${i + 1}" onclick="goToPhoto(${i})" />`
            ).join('');
        }

        function goToPhoto(idx) {
            galleryIndex = idx;
            updateGalleryImage();
        }

        document.getElementById('modalClose').addEventListener('click', closeGallery);
        document.getElementById('modalOverlay').addEventListener('click', (e) => {
            if (e.target === e.currentTarget) closeGallery();
        });

        document.getElementById('modalPrev').addEventListener('click', () => {
            galleryIndex = (galleryIndex - 1 + galleryPhotos.length) % galleryPhotos.length;
            updateGalleryImage();
        });

        document.getElementById('modalNext').addEventListener('click', () => {
            galleryIndex = (galleryIndex + 1) % galleryPhotos.length;
            updateGalleryImage();
        });

        // Keyboard nav
        document.addEventListener('keydown', (e) => {
            if (!document.getElementById('modalOverlay').classList.contains('open')) return;
            if (e.key === 'Escape') closeGallery();
            if (e.key === 'ArrowLeft') {
                galleryIndex = (galleryIndex - 1 + galleryPhotos.length) % galleryPhotos.length;
                updateGalleryImage();
            }
            if (e.key === 'ArrowRight') {
                galleryIndex = (galleryIndex + 1) % galleryPhotos.length;
                updateGalleryImage();
            }
        });

        // ====== FORM LOGIC ======
        document.getElementById('btnAddHouse').addEventListener('click', () => {
            document.getElementById('formOverlay').classList.add('open');
            document.body.style.overflow = 'hidden';
        });

        document.getElementById('formClose').addEventListener('click', () => {
            document.getElementById('formOverlay').classList.remove('open');
            document.body.style.overflow = '';
        });

        document.getElementById('formOverlay').addEventListener('click', (e) => {
            if (e.target === e.currentTarget) {
                document.getElementById('formOverlay').classList.remove('open');
                document.body.style.overflow = '';
            }
        });

        document.getElementById('houseForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const submitBtn = e.target.querySelector('.form-submit');
            submitBtn.textContent = '‚è≥ Salvando...';
            submitBtn.disabled = true;

            const novaCasa = {
                id: Date.now(),
                nome: document.getElementById('fNome').value,
                contato: document.getElementById('fContato').value,
                telefone: document.getElementById('fTelefone').value,
                preco: Number(document.getElementById('fPreco').value),
                localizacao: document.getElementById('fLocalizacao').value,
                quartos: Number(document.getElementById('fQuartos').value),
                banheiros: Number(document.getElementById('fBanheiros').value),
                garagem: document.getElementById('fGaragem').value === 'true',
                agendamento: document.getElementById('fAgendamento').value || null,
                mobilia: document.getElementById('fMobilia').value,
                status: document.getElementById('fStatus').value,
                facebookUrl: document.getElementById('fFacebook').value || '#',
                adicionadoPor: document.getElementById('fAdicionadoPor').value,
                fotos: [],
                criadoEm: new Date().toISOString()
            };

            try {
                // Save to Firebase Firestore
                await db.collection('casas').add(novaCasa);

                // Add to current list and re-render
                casas.push(novaCasa);
                render();

                // Close form and reset
                document.getElementById('formOverlay').classList.remove('open');
                document.body.style.overflow = '';
                document.getElementById('houseForm').reset();

                alert('Im√≥vel cadastrado com sucesso! ‚úÖ\nTodos que acessarem o site ver√£o este im√≥vel.');
            } catch (err) {
                console.error('Erro ao salvar:', err);
                alert('Erro ao salvar o im√≥vel. Tente novamente.');
            } finally {
                submitBtn.textContent = '‚úÖ Cadastrar Im√≥vel';
                submitBtn.disabled = false;
            }
        });

        // ====== INIT: LOAD FROM FIREBASE ======
        async function init() {
            render(); // render hardcoded houses first
            try {
                const snapshot = await db.collection('casas').orderBy('criadoEm', 'asc').get();
                snapshot.forEach(doc => {
                    const data = doc.data();
                    data.firebaseId = doc.id;
                    casas.push(data);
                });
                render(); // re-render with firebase houses
            } catch (err) {
                console.error('Erro ao carregar do Firebase:', err);
            }
        }
        init();
    </script>
</body>

</html>